<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TR Generator ‚Äî AI Chat</title>

  <link rel="icon" type="image/png" href="/static/favicon.ico">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css" />

  <style>
    .dataset-analysis table { width: 100%; font-size: 0.9rem; }
    .dataset-analysis td, .dataset-analysis th { vertical-align: top; white-space: nowrap; }
    .msg .bubble table { margin-bottom: 0; }
    pre { background-color: #f8f9fa; padding: 10px; border-radius: 6px; }
  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
</head>
<body class="bg-light">
  <main class="app-root d-flex align-items-center justify-content-center min-vh-100">
    <div class="chat-card card shadow-lg rounded-4 p-3 w-100" style="max-width: 760px;">

      <div class="chat-header d-flex align-items-center mb-3">
        <img src="/static/Floating_Robot.jpg" alt="robot" class="robot-img me-3" style="width:50px;height:50px;border-radius:8px" />
        <div class="chat-title">
          <h5 class="mb-0">AI BASED TRANSFORMATION RULE GENERATOR FOR DATA PIPELINES</h5>
          <small class="text-muted">Personal Assistant for Data Transformation</small>
        </div>
      </div>

      <!-- Mode toggle -->
      <div id="mode-toggle" class="mb-3">
        <label class="me-3"><input type="radio" name="mode" value="chat" checked> üí¨ Chat Mode</label>
        <label><input type="radio" name="mode" value="etl"> ‚öôÔ∏è Auto Mode</label>
      </div>

      <!-- Chat window -->
      <div id="chat-window" class="chat-window border rounded p-3 mb-3 bg-white" style="max-height:60vh; overflow-y:auto"></div>

      <!-- Controls -->
      <div class="chat-controls">
        <div class="file-uploads d-flex gap-2 mb-3">
          <input id="source-file" type="file" class="form-control form-control-sm" accept=".csv,.xls,.xlsx" title="Upload Source File" />
          <input id="target-file" type="file" class="form-control form-control-sm" accept=".csv,.xls,.xlsx" title="Upload Target File" />
        </div>

        <div class="d-flex gap-2 mb-3">
          <textarea id="user-query" class="form-control" rows="2" placeholder="Type your message (Chat) or query (ETL)..."></textarea>
          <button id="send-btn" class="btn btn-primary">Send</button>
        </div>

        <div class="d-flex gap-2 mb-3">
          <button id="downloadExcelBtn" class="btn btn-outline-success">‚¨á Excel</button>
          <button id="downloadSqlBtn" class="btn btn-outline-dark">‚¨á SQL</button>
          <span id="downloadStatus" class="text-muted ms-2"></span>
        </div>

        <div class="d-flex justify-content-between">
          <small class="text-muted">
            Tip: Use Chat Mode to ask questions. Switch to Auto Mode to upload files and generate SQL/Excel.
          </small>
          <small id="status" class="text-muted"></small>
        </div>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
